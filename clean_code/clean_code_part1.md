> 아키텍처도, 깨끗한 코드도, 완벽을 주장하지는 않는다. 단지 최선을 다해 정직하라 요구할 뿐이다. 오류는 인간의 본성이고 용서는 신의 본성이다. 스크럼에서 우리는 모든 것을 드러낸다. 더러운 빨래를 기꺼이 공개한다. 코드는 결코 완벽하지 않으므로 자신의 코드 상태를 정직하게 말한다. 좀 더 인간적이 되고, 좀 더 신의 용서를 받을 자격을 갖추며, 좀 더 세세함에 깃든 위대함에 가까워진다.
>
> -추천사에서 제임스 O. 코플리엔



# 깨끗한 코드

> 우리 모두는 자신이 짠 쓰레기 코드를 쳐다보며 나중에 손보겠다고 생각한 경험이 있다.
>
> ...
>
> 나중은 결코 오지 않는다.

- 나쁜 코드는 생산성 저하의 원인이다.
  - 개발 일정 등을 핑계로 급하게 짠 나쁜 코드는 언젠가는 개발 속도를 늦추는 원인이 된다.
  - 장기적인 관점에서 볼 때, 개발 일정을 맞추는 유일한 방법은 코드를 깨끗한 상태로 유지하는 일이다.



- 무엇이 깨끗한 코드인가

  - 비야네 스트롭스트룹(C++ 창시자)
    - 우아하고(누구에게나 쉽게 읽히며) 효율적인(속도가 빠르고 자원 낭비가 적은) 코드
    - 논리가 간단해야 버그가 숨어들지 못한다.
    - 의존성을 줄여야 유지보수가 쉬워진다.
    - 오류는 명백한 전력에 의거해 철저히 처리한다.
    - 성능을 최적으로 유지해야 사람들이 원칙 없는 최적화로 코드를 망치려는 유혹에 빠지지 않는다.
    - **깨끗한 코드는 한 가지를 제대로 한다.**
  - 그래디 부치
    - 깨끗한 코드는 단순하고 직접적이다.
    - 잘 쓴 문장처럼 읽힌다.
    - 결코 설계자의 의도를 숨기지 않는다.
    - 명쾌한 추상화와 단순한 제어문으로 가득하다.

  - 데이브 토마스
    - 깨끗한 코드는 작성자가 아닌 사람도 읽기 쉽고 고치기 쉽다.
    - 단위 테스트 케이스와 인수 테스트 케이스가 존재한다.
    - 깨끗한 코드에는 의미 있는 이름이 붙는다.
    - 특정 목적을 달성하는 방법은 여러 가지가 아닌 하나만 제공한다.
    - 의존성을 최소화하며 각 의존성을 명확히 정의한다.
    - API는 명확하며 최소화한다.
    - 언어에 따라 필요한 모든 정보를 코드만으로 명확히 표현할 수 없기에 코드는 문학적으로 표현해야 마땅하다.
  - 마이클 페더스
    - 깨끗한 코드는 누군가 주의 깊게 짰다는 느낌을 준다.
    - 고치려고 살펴봐도 딱히 손 댈 곳이 없다.
  - 론 제프리스
    - 모든 테스트를 통과한다.
    - 중복이 없다.
    - 시스템 내 모든 설계 아이디어를 표현한다.
    - 클래스, 메서드, 함수 등을 최대한 줄인다.

  - 워드 커닝햄
    - 코드를 읽으면서 짐작했던 기능들을 각 루틴이 그대로 수행한다면 깨끗한 코드라 불러도 되겠다.
    - 코드가 그 문제를 풀기 위한 언어처럼 보인다면 아름다운 코드라 불러도 되겠다.
    - 즉 읽으면서 짐작한 대로 동작하는 코드가 깨끗한 코드다.



# 의미있는 이름

- 소프트웨어에서 이름은 어디나 쓰인다.
  - 변수, 함수, 인수, 클래스, 패키지, 소스파일, 파일이 담긴 디렉터리 등 모든 것에 이름을 붙인다.
  - 좋은 이름을 붙이는 데는 시간이 걸리지만 좋은 이름으로 절약하는 시간은 훨씬 더 많다.
  - 이름을 잘 지으면 여러모로 편리하므로 아래에서는 이름을 잘 짓는 몇 가지 원칙을 소개한다.



## 의도를 분명히 밝혀라

- 이름에는 의도가 담겨야한다.
  - 이름은 다음과 같은 질문에 모두 답해야 한다.
    - 변수의 존재 이유
    - 수행하는 기능
    - 사용 방법
  - 따로 주석이 필요하다면 의도를 분명히 드러내지 못했다는 말이다.



- 나쁜 코드

  ```python
  def get_them(the_list):
      list1 = []
      for x in range(the_list):
          if the_list[0]==4:
              list1.append(the_list[x])
  	return list1
  ```

  - 단순한 코드임에도 알아보기 어렵다.
  - 문제는 코드의 단순성이 아니라 함축성이다.
  - 위 코드엔 아래와 같은 정보가 드러나지 않는다.
    - `the_list`에 무엇이 들어있는가
    - `the_list`에서 0번째 값이 왜 중요한가
    - 4는 어떤 의미인가?
    - 함수가 반환하는 `list1`을 어떻게 사용하는가?



- 좋은 코드

  ```python
  def get_flagged_cells(game_board):
      flagged_cells = []
      for cell in game_board:
          if cell[STATUS_VALUE]==FLAGGED:
              flagged_cells.append(cell)
      return flagged_cells
  ```

  - 코드만 보고도 아래의 사실이 유추가 가능하다.
    - game_board 안에는 게임 판의 cell 들이 들어 있다.
    - 각 cell의 STATUS_VALUE번째 값은 칸의 상태를 뜻한다.
    - FLAGGED는 깃발이 꽂힌 상태를 뜻한다.
    - 반환값인 `flagged_cells`는 깃발이 꽂힌 칸이 담긴다.
  - 위 코드만 보고도 지뢰 찾기 게임 코드의 일부라는 사실을 알 수 있다.



## 그릇된 정보를 피하라

- 코드에 그릇된 단서를 남겨서는 안된다.
  - 그릇된 단서는 코드의 의미를 흐린다.



- 널리 쓰이는 의미가 있는 단어를 다른 의미로 사용해도 안된다.
  - 예를 들어 직각 삼각형의 빗변(hypotenuse)을 hp로 줄이는 것은 읽는 사람들에게 그릇된 정보를 제공한다.



- 그룹으로 묶을 때, 실제로 list에 의해 묶여 있는 것이 아니라면 list라 명명하지 않는다.
  - 예를 들어 계정 정보를 묶을 때 실제 list로 묶은 것이 아니라 set 등에 저장했다면 account_list와 같은 이름은 사용하지 않는다.
  - 대신 account_group, bunch_of_account, accounts라 명명한다.



- 서로 흡사한 이름을 사용하지 않도록 주의한다.
  - 흡사한 이름은 보는 사람으로 하여금 혼동을 일으킨다.
  - 예를 들어 한 모듈에서 controller_for_efficient_handling_of_strings라는 이름을 사용하고, 다른 모듈에서 controller_for_efficient_storage_of_strings라고 사용한다면 보는 사람이 혼동일 일으킬 수 있다.



- 유사한 개념은 유사한 표기법을 사용한다.
  - 일관성이 떨어지는 표기법은 그릇된 정보다.



## 의미 있게 구분하라

- 동일한 범위 내에서 다른 두 개념에는 동일한 이름을 사용하지 못한다.
  - 따라서 이 둘의 이름은 개념의 특색에 따라 구분되어야 한다.



- 연속된 숫자를 덧붙이는 방식은 적절하지 못하다.

  ```python
  def some_func(a1, a2):
      pass
  ```



- 불용어를 추가하는 것은 적절치 못하다.

  - 예를 들어 product라는 이름이 이미 존재한다고 해서 아래와 같이 아무런 의미도 없는 불용어를 추가해서 사용하는 것은 문제가 될 수 있다.
  - 이름을 가지고 정확히 무슨 역할을 하는 변수인지 구분이 가지 않는다.

  ```python
  a_product = None
  products = []
  the_product = "product"
  ```

  - 물론 특정한 규칙을 가지고 불용어를 사용하는 것은 문제가 되지 않는다.
    - 예를 들어 모든 지역 변수에는 `a`를 붙이고 모든 함수 인수는 `the`를 붙이는 것과 같이 변수명을 통해 해당 변수의 역할을 유추할 수 있으면 된다.
  - data, info 같은 경우도 마찬가지로 의미가 불분명한 불용어이다.
    - 아래 변수명들이 각기 어떤 데이터를 담고 있는지를 이름만 보고는 파악하기 힘들다.
    - active_account, active_accounts, active_account_info, active_account_data



- 중복을 피해라
  - 코드 이름을 역전앞과 같이 중복되게 지어서는 안된다.
  - 변수명에 variable 같은 단어는 금물이다.
    - name과 구분하기 위해 변수명을 name_variable이라고 짓는다고 해서 name_variable이 name에 비해 추가적인 정보를 제공하는 것은 아무 것도 없다.
  - name_string과 같은 변수명도 마찬가지다.
    - name은 string 이외의 타입을 담고 있다고 생각하기는 힘들기에 사실상 중복된 이름이라고 할 수 있다.



- 발음하기 쉬운 이름을 사용해라
  - 

