# 리눅스 개요

- 리눅스의 탄생
  - 유닉스라는 운영체제는 리눅스가 탄생하기 이전부터 널리 사용되었다.
    - 현재까지도 가장 많이 사용되는 운영체제 중 하나이다.
    - 유닉스는 상용 소프트웨어로 발전됐고, 현재는 무척 비싼 비용을 지불해야 사용이 가능하다.
    - 여러 회사에서 제작/판매 중이며 IBM의 AIX, HP의 HP-UX, 오라클의 Solaris, DEC의 Tru64 Unix, Xinuos의 OpenServer 등이 많이 사용된다.
    - 리눅스는 무료 유닉스라고 생각할 수 있다.
  - 1991년 8월 리누스 토르발스는 어셈블리어로 리눅스 커널 0.01 버전을 처음 작성했다.
    - 그 당시 리누스 토르발스의 목표는 유닉스 시스템의 작은 버전인 미닉스보다 좋은 운영체제를 만드는 것이었다.
  - 이후 1992년에 0.02 버전을 작성하면서 인터넷에 소스코드를 공개했는데, 이것이 리눅스의 탄생이었다.
    - 실제로 리누스 토르발스는 커널이라고 부르는 리눅스의 핵심 부분만 작성해서 배포했다.
    - 현재의 리눅스는 여러 사람의 기여로 완성된 것이다.
  - 일반적으로 사람들이 이야기하는 리눅스는 리누스 토발스가 만든 커널에 컴파일러 쉘, 기타 응용 프로그램들이 조합된 배포판을 가리킨다.
    - 이러한 배포판은 여러 가지 응용 프로그램을 조합해 많은 리눅스 단체 또는 회사가 자신의 이름을 붙여서 판매/배포한다.
    - 우분투도 그 중 하나다.



- GNU 프로젝트
  - 토발즈가 리툭스 커널을 개발하기 전인 1984년, 리처드 스톨먼에 의해 GNU 프로젝트가 시작되었다.
    - GNU 프로젝트의 목표는 모두가 공유할 수 있는 소프트웨어를 만드넌 것이었다.
    - 리처드 스톨먼은 1985년 자유 소프트웨어 재단(Free Software Foundation, FSF)을 설립했다.
    - FSF는 GNU 프로젝트에서 제작한 소프트웨어를 지원함으로써 컴퓨터 프로그램의 복제, 변경, 소스코드  사용에 걸린 제한을 철폐하는 것을 목표로 삼았다.
  - FSF에서 제공하는 대부분의 소프트웨어는 GPL(General Public License)라는 라이선스를 따르도록 되어 있다.
    - 이 라이선스는 자유 소프트웨어의 수정과 공유에 있어서 기본적으로 자유를 보장한다.
    - 모든 소스코드가 완전히 공개되어 있는 자유 소프트웨어는 프리웨어라는 개념을 뛰어 넘어 다음과 같은 진정한 자유에 대한 개념을 내포하고 있다.
    - 소프트웨어 사용, 수정, 재배포에 대한 자유 및 수정된 소프트웨어의 이익을 전체가 얻을 수 있도록 배포할 수 있는 자유.



- 커널
  - 커널에는 아래와 같은 코드들이 포함되어 있다.
    - 현재 제어하는 하드웨어 장치의 지원 여부 정보
    - 하드웨어 성능
    - 하드웨어 제어
  - 리누스 토발즈는 이 커널이라고 부르는 리눅스의 핵심을 개발했고 지금도 계속 업그레이드 중이다.
    - 리눅스 커널 아카이브에서 항상 최신 버전의 리눅스 커널을 다운로드 할 수 있다.
  - 배포되는 리눅스 커널의 버전은 안정 버전과 개발 버전으로 나뉜다.
    - 안정 버전: 이미 검증된 개발 완료 코드로 구성.
    - 개발 버전: 현재 개발 중인 코드.
  - 리눅스의 가장 큰 특징 중 하나는 배포판(우분투 등)에 포함된 기본 커늘을 사용자가 직접 최신 커널로 업그레이드 할 수 있다는 점이다.
    - 이를 커널 업그레이드 혹은 커널 컴파일이라 부른다.



- 우분투 리눅스 배포판

  - 배포판

    - 일반 사용자의 경우 리눅스 커널만으로는 리눅스를 사용할 수 없다.
    - 때문에 여러 회사나 단체에서 리눅스 커널에 다양한 응용프로그램을 추가해 쉽게 설치 및 사용할 수 있도록 만든 것이 리눅스 배포판이다.
    - 배포판의 종류는 수십가지가 넘으며 우리나라에서 주로 사용하는 배포판도 10여 가지나 된다.

  - 데비안 리눅스

    - 데비안 리눅스는 이안 머독이 1993년 시작한 데비안 프로젝트에서 탄생했다.
    - 데비안 리눅스의 정시 버전은 1996년 1.1 버전(코드명 Buzz)으로 출시되었다.
    - 데비안의 코드명은 토이스토리에 나오는 캐릭터들의 이름으로 붙여졌다.
    - 데비안의 가장 큰 특징 중 하나는 패키지 설치 및 업그레이드가 상당히 단순하며 apt 프로그램을 통해 소프트웨어 설치나 업데이트 등이 자동으로 이루어진다는 것이다.

  - 우분투 리눅스

    - 데비안 리눅스를 기초로 그놈(GNOME) 데스크톱 환경을 사용하는 리눅스 배포판이다.
    - 캐노니컬사에서 개발하기 시작했으며 현재는 캐노니컬사의 지원을 받으며 우분투 재단에서 개발을 진행하고 있다.
    - 2004년 10월 4.10버전을 처음으로 출시했으며, 현재 가장 인기 있는 리눅스 배포판 중 하나가 되었다.
    - 우분투는 남아프리카 어느 부족의 언어로 '네가 있으니 나도 있다'라는 뜻으로, 로고 역시 이를 반영하여 여러 사람이 손을 마주잡고 빙 둘러 서 있는 모양이다.
    - 우분투의 버전은 팔표한 연도와 월로 짓는다. 예를 들어 20.04는 20년 4월에 발표한 버전이다.
    - 지원 기간이 9개월 정도로 짧은 일반 버전과 5년 정도로 긴 LTS(Long Term Support) 버전으로 나눠서 발표하는데 업무용으로는 LTS 버전이 바람직하다.

    



# 가상머신 준비하기

- 가상 머신 사양

  |               | Server_A                             | Server_B               | Client          | WinClient                |
  | ------------- | ------------------------------------ | ---------------------- | --------------- | ------------------------ |
  | 주 용도       | 서버 전용                            | 서버 전용(텍스트 모드) | 클라이언트 전용 | Windows 클라이언트 전용  |
  | OS            | Ubuntu 64-bit                        | 동일                   | 동일            | Windows 10               |
  | 설치할 ISO    | Ubuntu Desktop 20.04                 | Ubuntu Server 20.04    | Kubuntu 20.04   | Windows 10 평가판(32bit) |
  | 하드 용량     | 20GB                                 | 동일                   | 동일            | 60GB                     |
  | 하드 타입     | SCSI                                 | 동일                   | SCSI 또는 SATA  | 동일                     |
  | 메모리 할당   | 2GB(2048MB)                          | 동일                   | 동일            | 1GB                      |
  | 네트워크 타입 | Use network address translation(NAT) | 동일                   | 동일            | 동일                     |
  | CD/DVD        | O                                    | O                      | O               | O                        |
  | Floppy 장치   | X                                    | X                      | O               | X                        |
  | Audio 장치    | X                                    | X                      | O               | X                        |
  | USB 장치      | X                                    | X                      | O               | X                        |
  | Printer       | X                                    | X                      | O               | X                        |




- 가상 머신 생성

  > https://github.com/hedge0207/TIL/blob/master/etc/virtual_machine.md 

  - 위 markdown을 참고하여 가상 머신 및 필요한 운영체제를 설치한다.



# 리눅스 기본 개념

- 리눅스의 특징
  - 대소문자를 구분한다.
  - 일반 사용자는 프롬프트에 `#`으로 표시가 되며, root 사용자는 `$`으로 표시가 된다.



- 디스크 파티션과 크기

  - 리눅스 파티션은 루트 파티션이라 부르는 `/` 파티션과 swap 파티션 2개만 있어도 운영이 가능하다.
  - 일반적인 용도로는 다음과 같이 나눌 수 있다.
    - `/` 파티션과 swap 파티션 2개만 있어도 운영이 가능하다고 한 이유는 바로 아래에서 확인 가능하듯 나머지 파티션(/bin, /sbin, /home)이 루트 파티션(/)에 종속되기 때문이다.

  | 마운트 포인트 | 비고                                                         |
  | ------------- | ------------------------------------------------------------ |
  | /             | 루트 파티션                                                  |
  | /bin          | 기본 명령어가 저장된 곳                                      |
  | /sbin         | 시스템 관리용 명령어가 저장 된 곳                            |
  | /etc          | 시스템 환경 설정과 관련되 파일이 저장 된 곳                  |
  | /boot         | 부팅 커널이 저장 된 곳                                       |
  | /media        | 외부 장치를 마운트하기 위한 곳                               |
  | /usr          | 응용 프로그램이 주로 저장 됨                                 |
  | /lib          | 프로그램의 라이브러리가 저장됨                               |
  | /dev          | 장치 파일들이 저장됨                                         |
  | /proc         | 시스템의 프로세서 정보, 프로그램 정보, 하드웨어 정보 등이 저장 됨 |
  | /tmp          | 임시 파일들이 저장됨                                         |
  | /var          | 로그, 캐시 파일 등이 저장됨                                  |
  | /root         | 시스템 관리자인 root의 홈 디렉토리                           |
  | /home         | 사용자별 공간                                                |
  | /lost+found   | 파일 시스템 복구를 위한 디렉토리                             |
  | swap 파티션   | RAM 부족시 사용되는 공간                                     |




- X 윈도(X Window)
  - MS의 Windows와 같은 GUI를 리눅스에 제공한다.
  - Windows의 경우 그래픽 모드가 없으면 운영이 거의 불가능하지만 리눅스의 X 윈도는 하나의 편리한 유틸리티일 뿐이지 반드시 필요한 것은 아니다.



- 종료와 로그아웃

  - 아래 명령어들로 종료가 가능하다.
    - `-P` 또는 `-p` 옵션은 시스템 종료를 의미한다.

  ```bash
  $ poweroff
  $ shutdown -P now
  $ halt -p
  $ init 0
  ```

  - shutdown 상세
    - `shutdown`의 `now` 부분에 시간을 지정하면 지정한 시간에 시스템을 종료한다.

  ```bash
  $ shutdown -P +10	# 10분 후 종료
  $ shutdown -r 22:00 # 22시에 재부팅
  $ shutdown -c 		# 예약된 shutdown 취소
  $ shutdown -k +15	# 현재 접속한 사용자에게 15분 후 종료된다는 메시지를 보내지만 실제로 종료되지는 않음
  ```

  - 로그아웃
    - 로그아웃은 시스템 종료와 의미가 다르다.
    - 리눅스는 여러 사용자가 동시에 접속해서 사용하는 다중 사용자(Multi-User) 시스템이므로 자신만의 접속을 끝내는 로그아웃이 필요하다.
  
  ```bash
  # 아래 명령어로 로그아웃이 가능하다.
  $ logout
  $ exit
  ```



- 리부팅

  - 아래 명령어를 통해 리부팅이 가능하다.
  - init은 종료에도 쓰이고 리부팅에도 쓰이는데 init 뒤에 붙는 숫자는 아래의 런레벨에 관한 설명을 참고하면 된다.

  ```bash
  $ reboot
  $ init 6
  ```



- 가상 콘솔
  - 가상 콘솔이란 가상의 모니터라고 생각하면 이해하기 쉽다.
    - 우분투는 총 6개(2~7번)의 가상 콘솔을 제공한다.
    - 각각의 가상 콘솔로 이동하는 단축키는 `ctrl+alt+F2~F7`이다.
    - 위 단축키를 통해 이동하면 화면 최상단에 `tty<숫자>`와 같은 메시지가 출력되는데 숫자에 해당하는 콘솔이라는 가상 콘솔이라는 뜻이다.
  - 가상 콘솔을 활용하여 `shutdown` 명령어를 입력했을 때 다른 사용자에게 무슨일이 발생하는지 확인해본다.
    - `ctrl+alt+F3`을 입력하여 3번 콘솔로 이동 후 root 사용자로 로그인한다.
    - `ctrl+alt+F4`를 입력하여 4번 콘솔로 이동 후 일반 사용자로 로그인한다.
    - 다시 3번 콘솔로 이동 후 `shutdown -h +5`를 입력하여 5분 후에 종료하겠다는 명령을 날린다.
    - 4번 콘솔로 이동하면 `The system is going to down for poweroff at <날짜 및 시간>`이라는 메시지가 출력된 것을 확인 가능한데, 이 상태에서 `enter`를 누르면 다시 사용이 가능하지만 위 메시지는 매 분 뜨게 된다.
    - 다시 3번 콘솔로 이동하여 `shutdown -c`를 입력해 예약한 종료를 취소한다.
    - 다시 4번 콘솔로 이동하여 확인해보면 `The system shutdown has been cancelled`라는 메시지가 뜬 것을 확인 가능하다.
    - 3번, 4번 콘솔에서 모두 logout 한 뒤 2번 콘솔로 돌아간다.



- 런 레벨

  - 리눅스 시스템이 가동되는 방법을 7가지 런레벨로 나눌 수 있다.
  - init 명령어 뒤에 붙는 숫자가 바로 런레벨로, init은 런 레벨을 변경하는 명령어이다.
  - 일반적으로 런 레벨 3번을 Multi-User 모드로 사용한다.
    - 2번과 4번은 우분투에서 사용하지 않지만 다른 리눅스 기반 OS와의 호환성을 위해 런 레벨 3번과 동일한 것으로 취급한다.

  | 런레벨 | 영문 모드  | 설명                      | 비고                  |
  | ------ | ---------- | ------------------------- | --------------------- |
  | 0      | Power Off  | 종료 모드                 |                       |
  | 1      | Rescue     | 시스템 복구 모드          | 단일 사용 모드        |
  | 2      | Multi-User |                           | 사용하지 않음         |
  | 3      | Multi-User | 텍스트 모드의 다중 사용자 |                       |
  | 4      | Multi-User |                           | 사용하지 않음         |
  | 5      | Graphical  | 그래픽 모드의 다중 사용자 | X 윈도 사용시 지정 됨 |
  | 6      | Reboot     |                           |                       |

  - 런 레벨 모드 확인
    - `/lib/systemd/system` 디렉터리의 `runlevel?.target` 파일을 확인한다.
    - 7개의 `runlevel?.target` 파일을 확인 가능한데 `runlevel?.target` 파일은 모두 링크 파일이다.
    - 각각의 링크 파일은 실제 파일과 연결되어 있다.
    - 예를 들어 `runlevle0.target` 파일은 `poweroff.target` 파일을 가리킨다.
  
  ```bash
  $ cd /lib/systemd/system
  $ ls -l runlevle?.target
  ```
  
  - 현재 설정된 런 레벨 확인하기
    - `default.traget`과 링크 되어 있는 파일을 확인하면 런레벨을 확인 가능하다.
    - X 윈도를 사용할 경우 아래와 같이 `graphical.target`(런 레벨 5)로 설정되어 있다.
  
  ```bash
  $ ls -l /lib/systemd/system/default.target
  lrwxrwxrwx 1 root root 16 11월 13 13:46 default.target -> graphical.target
  ```
  
  - 런 레벨 변경하기
    - `default.target`에 링크 된 파일을 `multi-user.target`으로 변경하여 런 레벨 3번으로 변경할 수 있다.
    - 이후 재부팅하면 텍스트 모드로 실행된다.
    - `startx`를 통해 X 윈도로 다시 진입 가능하다.
  
  ```bash
  $ cd /lib/systemd/system
  # 링크 파일 변경
  $ ln -sf multi-user.target default-target
  # 변경 확인
  $ ls -l default.target
  ```
  
  - 다시 런 레벨 5로 변경하기
    - 이후 재부팅하면 X 윈도로 실행된다.
  
  ```bash
  $ cd /lib/systemd/system
  # 링크 파일 변경
  $ ln -sf graphical.target default-target
  # 변경 확인
  $ ls -l default.target
  ```



- 자동완성과 히스토리

  - 리눅스는 `tab`키를 사용하여 파일 이름 또는 폴더 이름 등을 자동으로 완성하는 기능을 제공한다.
    - 자동 완성 후보가 2개 이상일 경우 `tab` 키를 두 번 누르면 후보들을 보여준다. 
  - 도스 키(Dos Key)란 이전에 입력한 명령을 키보드의 `↑`, `↓` 키를 활용하여 다시 사용할 수 있게 하는 것을 말한다.

  - `history` 명령을 통해 기존에 사용했던 모든 명령을 볼 수 있다.
    - `-c` 옵션을 통해 저장된 모든 명령어를 삭제할 수 있다.

  ```bash
  $ history [옵션]
  ```

  - 리눅스는 대소문자를 구분하며, 파일, 폴더 이름 등에 공백이 존재할 경우 이를 쌍따옴표로 묶어줘야한다.



- manual

  - 아래 명령어를 통해서 linux 명령어들의 설명을 볼 수 있다.

  ```bash
  $ man <설명을 보려는 명령어>
  ```

  - 명령어
    - 상, 하 이동은 화살표를 사용하거나 `k`/`j`키를 사용한다.
    - 페이지 단위의 이동은 `page up`/`down` 혹은 `spacebar`/`b`키를 사용한다.
    - `/찾으려는 단어`를 통해서 특정 단어를 찾는 것도 가능하며 `n`키를 통해 다음 단어로 넘어갈 수 있다.
    - `q`키로 종료한다.
  - `--help` 옵션을 통해서도 확인이 가능하다.

  ```bash
  $ <명령어> --help
  ```



- 숨김파일 및 현재 디렉터리
  - 리눅스는 파일 혹은 디렉터리 이름의 가장 첫 글자로 `.`을 넣으면 숨김 파일이 된다.
    - 리눅스에는 숨김 파일이라는 속성이 별도로 존재하지 않는다.
    - 이름 앞에 `.`만 붙여주면 된다.
  - 현재 디렉터리
    - 현재 디렉터리란 현재 위치한 디렉터리를 의미한다.



## 리눅스 에디터

- 리눅스 에디터

  - 리눅스에는 다양한 종류의 에디터가 존재한다.
    - gedit: window의 text와 유사하며, GUI에서만 사용이 가능하다.
    - nano: text 모드에서 사용할 수 있는 에디터이다.
    - vi: 모든 리눅스, 유닉스 계열에 존재하는 에디터로 우분투는 기존의 vi를 더 발전시킨 vim(Vi IMproved) 에디터를 사용한다.
  - nano
    - `-c` 옵션을 주면 하단에 커서의 위치 정보를 보여준다.
    - 파일명은 명령어를 실행할 때 입력해도 되고 안해도 되는데, 안 할 경우 종료할 때 파일명을 입력 가능하다.
    - `ctrl` + `X`로 종료가 가능하며 종료할 때 `Y`, `N`으로 저장 여부를 결정 가능하다.

  ```bash
  $ nano [옵션] [파일명]
  ```



- vi

  - vi 에디터 실행

  ```bash
  $ vi [파일명]
  ```

  - 기본 명령어

    - `esc`를 누른 후 `:q`를 입력하여 종료가 가능하다(변경 사항이 있을 경우 종료가 불가능한데 이 때는 `:q!`를 입력하면 된다).
    - `:wq`는 저장 후 종료하는 것이다.

    - `:set number`를 입력하면 매 행 숫자가 표시된다.

  - 비정상적으로 종료될 경우 swap 파일이 생성되는데 해당 swap 파일을 삭제하면 다시 정상적으로 편집이 가능하다.
  - 입력 모드로 전환하는 명령어

  | 키   | 설명                                   | 키   | 설명                                       |
  | ---- | -------------------------------------- | ---- | ------------------------------------------ |
  | i    | 현재 커서의 위치부터 입력              | I    | 현재 커서가 위치한 줄의 맨 앞에서부터 입력 |
  | a    | 현재 커서의 다음 칸부터 입력           | A    | 현재 커서가 위치한 줄의 맨 뒤에서부터 입력 |
  | o    | 현재 커서의 다음 줄에 입력             | O    | 현재 커서의 이전 줄에 입력                 |
  | s    | 현재 커서 위치의 한 글자를 지우고 입력 | S    | 현재 커서의 한 줄을 지우고 입력            |

  - 커서 이동
    - 화살표, pageup, pagedown으로도 가능하지만 이런 키들이 없는 경우에 사용할 수 있다.

  | 키                  | 설명                     | 키                | 설명                         |
  | ------------------- | ------------------------ | ----------------- | ---------------------------- |
  | h                   | 커서 왼쪽으로 한 칸 이동 | j                 | 커서를 아래로 한 칸 이동     |
  | k                   | 커서 위로 한 컨 이동     | i                 | 커서를 오른쪽으로 한 칸 이동 |
  | ctrl+F(==page down) | 다음 화면으로 이동       | ctrl+B(==page up) | 이전 화면으로 이동           |
  | ^(==home)           | 현재 행의 처음으로 이동  | $(==end)          | 현재 행의 마지막으로 이동    |
  | gg                  | 맨 첫 행으로 이동        | G                 | 제일 끝 행으로 이동          |
  | 숫자G               | 해당 숫자의 행으로 이동  | :숫자+enter       | 해당 숫자의 행으로 이동      |

  - 삭제, 복사, 붙여넣기

  | 키       | 설명                                  | 키             | 설명                                  |
  | -------- | ------------------------------------- | -------------- | ------------------------------------- |
  | x(==del) | 현재 커서가 위차한 글자 삭제          | X(==backspace) | 현재 커서가 위차한 앞 글자 삭제       |
  | dd       | 현재 커서의 행 삭제                   | 숫자dd         | 현재 커서부터 숫자만큼의 행 삭제      |
  | yy       | 현재 커서가 있는 행을 복사            | 숫자yy         | 현재 커서부터 숫자만큼의 행을 복사    |
  | p        | 복사한 내용을 현재 행 이후에 붙여넣기 | P              | 복사한 내용을 현재 행 이전에 붙여넣기 |

  - 문자열 찾기, 치환

  | 키                            | 설명                                     | 키   | 설명                              |
  | ----------------------------- | ---------------------------------------- | ---- | --------------------------------- |
  | /문자열+enter                 | 현재 커서 이후로 해당 문자열을 찾음      | n    | 찾은 문자 중에서 다음 문자로 이동 |
  | :%s/기존문자열/새문자열+enter | 기존 문자열을 전부 새 문자열로 변경한다. |      |                                   |



## 마운트

- 마운트

  - mount

    - windows에서는 잘 사용하지 않으므로 생소한 개념일 수 있다.
    - 리눅스에서는 하드디스크의 파티션, CD/DVD, USB 메모리 등을 사용하려면 지정한 위치에 연결해줘야한다.

    - 이렇게 물리적인 장치를 특정한 위치(일반적으로 폴더)에 연결시키는 과정을 마운트라한다.

  - mount 확인하기

    - 아래와 같이 어디에 마운트 되었는지 표시된다.
    - `/dev/sda2`는 root 디렉토리(`/`)에 마운트 된 것을 확인 가능하다.

    ```bash
    $ mount
    
    # output
    (...)
    /dev/sda2 on / type ext4 (rw,relatime,errors=remount-ro)
    (...)
    ```

  - 마운트하기

    ```bash
    $ mount <마운트할 장치 이름> <마운트할 디렉토리>
    ```

  - unmount하기

    - 지금 작업중인 디렉터리를 언마운트 할 수는 없다.
    - 즉 예를 들어 예시에서 현재 디렉토리가 `/dev/sda2`인 상태에서 unmount를 시도하면 `target is busy`라는 메시지가 나오며 언마운트에 실패한다.
    - unmount할 장치와 디렉토리 중 어느 것을 입력해도 동일하게 동작한다.

    ```bash
    $ umount <unmount할 장치 이름 혹은 umount할 디렉토리 이름>
    
    # e.g.
    $ umount /dev/sda2
    ```



- iso 파일 마운트하기

  - iso 파일은 cd 혹은 dvd의 내용을 파일로 압축해놓은 것을 뜻한다.
  - iso 파일 생성하기
    - `-r -J` : 8글자 이상의 파일 이름 및 대소문자를 구분해서 인식하기 위한 옵션
    - `-o`: 명령어의 결과 출과로 나올 파일 이름을 작성한다. 

  ```bash
  $ genisoimage -r -J -o <파일명.iso>
  ```

  - 마운트하기

  ```bash
  $ mount -o loop <iso 파일명> <마운트할 디렉토리> 
  ```

  

## 사용자 관리와 파일 속성

### 사용자와 그룹

- 리눅스는 다중 사용자 시스템(multi-user system)이다.

  - 1대의 리눅스에 여러 명이 동시에 접속해서 사용할 수 있는 시스템이다.
  - 리눅스를 설치하면 기본적으로 root라는 이름을 가진 슈퍼 유저(super-user)가 있다.
    - 이 root 사용자에게는 시스템의 모든 작업을 실행할 수 있는 권한이 있다.
    - 또한 시스템에 접속할 사용자를 생성할 수 있는 권한도 있다.

  - 모든 사용자는 하나 이상의 그룹에 소속되어 있어야 한다.



- 모든 사용자 확인하기

  - 사용자에 대한 정보는 `/etc/passwd` 파일에 저장되어 있다.

  ```bash
  $ cat /etc/passwd
  ```

  - 생각보다 많은 사용자가 보일텐데 모두 리눅스에 기본적으로 존재하는 표준 사용자다.
  - 각 행의 의미는 다음과 같다.
    - 암호가 x로 표시되는 경우 `/etc/shadow` 파일에 비밀번호가 저장되어 있다는 의미다.
    - 추가 정보에는 전체 이름, 사무실 호수, 직장 전화번호, 집 전화번호, 기타 등을 나타낸다.

  ```bash
  <사용자 이름>:<암호>:<사용자ID>:<사용자가 소속된 그룹>:<추가 정보>:<홈 디렉토리>:<기본 셸>
  
  # e.g.
  root:x:0:0:root:/root:/bin/bash
  ```



- 그룹 확인하기

  - 그룹에 대한 정보는 `/etc/group` 파일에 저장되어 있다.

  ```bash
  $ cat /etc/group
  ```

  - 역시 생성하지 않은 수 많은 그룹이 보일텐데 이 역시 리눅스에 기본적으로 존재하는 그룹이다.
  - 각 행의 의미는 다음과 같다.
    - 그룹에 속한 사용자 이름은 참조로 사용된다. 즉 해당 부분에 아무 것도 써 있지 않다고 해서 그룹에 소속된 사용자가 없다는 것은 아니다.

  ```bash
  <그룹 이름>:<비밀번호>:<그룹 id>:<그룹에 속한 사용자 이름>
  ```



- `/etc/skel`
  - 새로운 사용자가 생성될 때, 해당 사용자의 home 디렉토리가 자동으로 생성된다.
  - 이 때 `/etc/skel` 디렉터리의 모든 내용을 사용자의 홈 디렉터리에 복사하는 작업이 발생한다.
  - 따라서, 새로운 사용자를 생성할 때 해당 사용자의 home 디렉토리에 특정 파일을 미리 넣어두고자 한다면 `/etc/skel`에 파일을 추가하면 된다.
  - skel은 skeleton의 약자이다.



- X 윈도 환경에서도 사용자를 관리 가능하다.
  - 바탕 화면 우측 상단의 아래 화살표를 클릭한다.
  - 설정을 클릭 후 사용자를 선택한다.
  - 기본적인 사용자 관리가 가능하다.



### 파일, 디렉터리의 소유권가 허가권

- 리눅스에는 각 파일과 디렉터리마다 소유권과 허가권이라는 속성이 있다.

  - `ls -l` 명령어로 확인이 가능하다.

  ```bash
  $ ls -l
  
  # 결과
  drwxr-xr-x 1 Dell 100230   0 Jan  9 23:02  test/
  -rw-r--r-- 1 Dell 100230   0 Jan  9 23:02  test.txt
  ```

  - 위 결과로 총 8가지 정보를 알 수 있다.
    - 파일 유형(`d`/`-`)
    - 파일 허가권(`rwxr-xr-x`)
    - 링크 수(`1`)
    - 파일 소유자 이름(`Dell`)
    - 파일 소유 그룹(`100230`)
    - 파일 크기(0)
    - 마지막 변경 시간/날짜(`Jan  9 23:02`)
    - 파일 이름(`test/`/`test.txt`)



- 파일 유형
  - 맨 첫 글자를 통해 파일인지 폴더인지를 알 수 있다.
    - `d`: 디렉터리
    - `-`: 파일
  - 그 외에 아래와 같은 것들이 있다.
    - `b`: 블록 디바이스
    - `c`: 문자 디바이스
    - `l` 링크



- 파일 허가권

  - 파일 유형 뒤에 오는 문자들을 통해 파일의 허가권을 알 수 있다.
  - 파일 허가권은 3 글자씩 총 3개의 부분으로 나눌 수 있다.
    - 소유자의 파일 접근 권한
    - 그룹의 파일 접근 권한
    - 그 외 사용자의 파일 접근 권한
  - rwx순으로 표현한다.
    - `r`(read): 읽기 권한을 의미한다.
    - `w`(write): 쓰기 권한을 의미한다.
    - `x`(executable): 실행 권한을 의미한다.
    - `-`: 해당 권한이 없음을 의미한다.
  - 디렉터리는 기본적으로 실행 권한이 있어야 해당 디렉터리로 이동이 가능하다.
    - 따라서 기본적으로 모든 사용자에게 실행 권한이 설정되어 있다.
  - 2진수로 표현이 가능하다.
    - 권한이 있음을 1, 없음을 0으로 표기한다.
    - 이를 10진수로 표현하여 소유자, 그룹, 그 외 사용자의 권한을 순서대로 나열하여 권한을 표기할 수 있다.
    - 아래 예시에서 소유자 권한은 8진수로 7, 그룹 권한은 8진수로 5, 그 외 사용자 권한은 8진수로 3이므로 753으로 표현이 가능하다.

  |       | 소유자 |      |      | 그룹 |      |      | 그 외 사용자 |      |      |
  | ----- | ------ | ---- | ---- | ---- | ---- | ---- | ------------ | ---- | ---- |
  | 문자  | r      | w    | x    | r    | -    | w    | -            | x    | w    |
  | 2진수 | 1      | 1    | 1    | 1    | 0    | 1    | 0            | 1    | 1    |



- 파일 허가권 변경하기

  - chmod 명령어로 허가권 변경이 가능하다.
    - 숫자에는 위 표에서 처럼 소유자, 그룹, 그 외 사용자의 권한을 8진수로 변환한 숫자들을 나열한 숫자를 입력한다.
    - 예를 들어 777은 모든 사용자에게 읽기, 쓰기, 실행 권한을 주겠다는 의미이고, 753은 위 표와 같은 권한을 주겠다는 의미이다.

  ```bash
  $ chmod <숫자> <파일명>
  ```

  - `u`, `g`, `o`, `a`와 `+`, `-`, 그리고 `x`, `r`, `w` 를 조합하여 변경이 가능하다..
    - `u`는 사용자, `g`는 그룹, `o`는 다른 사용자, `a`는 전부를 의미한다.
    - `+`는 권한 추가, `-`는 권한 제거를 의미한다.
    - 예를 들어 아래 명령어는 사용자에게 읽고 쓰는 권한을 부여하는 것이다.

  ```bash
  $ chomd u+rx test.txt
  ```

  - 오직 root 사용자만이 변경이 가능하다.



- 특수한 형태의 파일 권한
  - rwx 외에도 특수한 용도의 setuid, setgud, stiky bit가 있다.
    - 따라서 사
  - 앞에서는 파일의 허가권을 8진수 000<sub>8</sub>~777<sub>8</sub>로 표현했으나 실제로는 8진수 0000<sub>8</sub>~0777<sub>8</sub>까지 네 자리로 표현할 수 있다.
  - 8진수 네 자리 중 첫 번째 값을 100<sub>2</sub>(==4)로 표현하는 것을 setuid라 부른다.
    - 리눅스 파일 주 비밀번호를 지정하는 `/bin/passwd`가 이에 해당한다.
    - 이 파일의 경우 파일의 소유자 권한 중 쓰기 권한이 x가 아닌 s로 표기된다.
    - 일반적으로 파일의 실행은 파일을 실행한 사람의 권한으로 실행이 된다.
    - 그러나 이 경우 파일의 소유자 권한으로 파일이 실행된다.
    - 따라서 보안상의 이유로 설정하지 않는 것을 추천한다.
    - 설정 방법: `chmod u+s <파일명>`(u가 아닌 g로 하면 setgid가 된다)
  - 8진수 네 자리 중 첫 번째 값을 010<sub>2</sub>(==2)로 표현하는 것을 setgid라 부른다.
    - 그룹의 권한 중 쓰기 권한이 x가 아닌 s로 표기된다.
    - 마찬가지로 파일을 실행한 사용자의 그룹이 아닌 생성한 자의 그룹으로 파일이 실행된다.
    - 또한 setgid가 설정된 디렉터리에 파일을 생성할 경우 파일을 생성한 사람이 아닌 setgid가 설정된 디렉터리의 소유자가 파일의 소유자가 된다.
    - 설정 방법: `chmod g+s <파일명>`
  - 8진수 네 자리 중 첫 번째 값을 001<sub>2</sub>(==1)로 표현하는 것을 stiky bit라 부른다.
    - 다른 사용자 권한 중 마지막 문자가 x가 아닌 t로 표기된다.
    - 여러 사람이 공유할 디렉터리에 주로 설정된다.
    - stiky bit로 설정된 디렉터리 안에는 모든 사용자가 파일/디렉터리를 생성해서 사용할 수 있지만, 다른 사용자의 파일을 삭제하지는 못한다.
    - 파일의 권한과는 무관하게 오직 파일의 소유자만이 삭제가 가능하다.
    - 설정 방법: `chmod o+t <파일명>`



- 파일 소유권

  - 파일 소유권은 파일을 소유한 사용자와 그룹을 의미한다.
  - 파일 소유권 변경하기

  ```bash
  $ chown <변경할 사용자 이름[.변경할 그룹 이름]> <파일명>
  
  # e.g. 파일 소유권을 cha 유저에게, 파일의 그룹을 ubuntu로 변경
  $ chowm cha.ubuntu test.txt
  ```

  - 그룹만 변경하기

  ```bash
  $ chgrp <그룹명> <파일명>
  ```

  
