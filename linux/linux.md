# 리눅스 개요

- 리눅스의 탄생
  - 유닉스라는 운영체제는 리눅스가 탄생하기 이전부터 널리 사용되었다.
    - 현재까지도 가장 많이 사용되는 운영체제 중 하나이다.
    - 유닉스는 상용 소프트웨어로 발전됐고, 현재는 무척 비싼 비용을 지불해야 사용이 가능하다.
    - 여러 회사에서 제작/판매 중이며 IBM의 AIX, HP의 HP-UX, 오라클의 Solaris, DEC의 Tru64 Unix, Xinuos의 OpenServer 등이 많이 사용된다.
    - 리눅스는 무료 유닉스라고 생각할 수 있다.
  - 1991년 8월 리누스 토르발스는 어셈블리어로 리눅스 커널 0.01 버전을 처음 작성했다.
    - 그 당시 리누스 토르발스의 목표는 유닉스 시스템의 작은 버전인 미닉스보다 좋은 운영체제를 만드는 것이었다.
  - 이후 1992년에 0.02 버전을 작성하면서 인터넷에 소스코드를 공개했는데, 이것이 리눅스의 탄생이었다.
    - 실제로 리누스 토르발스는 커널이라고 부르는 리눅스의 핵심 부분만 작성해서 배포했다.
    - 현재의 리눅스는 여러 사람의 기여로 완성된 것이다.
  - 일반적으로 사람들이 이야기하는 리눅스는 리누스 토발스가 만든 커널에 컴파일러 쉘, 기타 응용 프로그램들이 조합된 배포판을 가리킨다.
    - 이러한 배포판은 여러 가지 응용 프로그램을 조합해 많은 리눅스 단체 또는 회사가 자신의 이름을 붙여서 판매/배포한다.
    - 우분투도 그 중 하나다.



- GNU 프로젝트
  - 토발즈가 리툭스 커널을 개발하기 전인 1984년, 리처드 스톨먼에 의해 GNU 프로젝트가 시작되었다.
    - GNU 프로젝트의 목표는 모두가 공유할 수 있는 소프트웨어를 만드넌 것이었다.
    - 리처드 스톨먼은 1985년 자유 소프트웨어 재단(Free Software Foundation, FSF)을 설립했다.
    - FSF는 GNU 프로젝트에서 제작한 소프트웨어를 지원함으로써 컴퓨터 프로그램의 복제, 변경, 소스코드  사용에 걸린 제한을 철폐하는 것을 목표로 삼았다.
  - FSF에서 제공하는 대부분의 소프트웨어는 GPL(General Public License)라는 라이선스를 따르도록 되어 있다.
    - 이 라이선스는 자유 소프트웨어의 수정과 공유에 있어서 기본적으로 자유를 보장한다.
    - 모든 소스코드가 완전히 공개되어 있는 자유 소프트웨어는 프리웨어라는 개념을 뛰어 넘어 다음과 같은 진정한 자유에 대한 개념을 내포하고 있다.
    - 소프트웨어 사용, 수정, 재배포에 대한 자유 및 수정된 소프트웨어의 이익을 전체가 얻을 수 있도록 배포할 수 있는 자유.



- 커널
  - 커널에는 아래와 같은 코드들이 포함되어 있다.
    - 현재 제어하는 하드웨어 장치의 지원 여부 정보
    - 하드웨어 성능
    - 하드웨어 제어
  - 리누스 토발즈는 이 커널이라고 부르는 리눅스의 핵심을 개발했고 지금도 계속 업그레이드 중이다.
    - 리눅스 커널 아카이브에서 항상 최신 버전의 리눅스 커널을 다운로드 할 수 있다.
  - 배포되는 리눅스 커널의 버전은 안정 버전과 개발 버전으로 나뉜다.
    - 안정 버전: 이미 검증된 개발 완료 코드로 구성.
    - 개발 버전: 현재 개발 중인 코드.
  - 리눅스의 가장 큰 특징 중 하나는 배포판(우분투 등)에 포함된 기본 커늘을 사용자가 직접 최신 커널로 업그레이드 할 수 있다는 점이다.
    - 이를 커널 업그레이드 혹은 커널 컴파일이라 부른다.



- 우분투 리눅스 배포판

  - 배포판

    - 일반 사용자의 경우 리눅스 커널만으로는 리눅스를 사용할 수 없다.
    - 때문에 여러 회사나 단체에서 리눅스 커널에 다양한 응용프로그램을 추가해 쉽게 설치 및 사용할 수 있도록 만든 것이 리눅스 배포판이다.
    - 배포판의 종류는 수십가지가 넘으며 우리나라에서 주로 사용하는 배포판도 10여 가지나 된다.

  - 데비안 리눅스

    - 데비안 리눅스는 이안 머독이 1993년 시작한 데비안 프로젝트에서 탄생했다.
    - 데비안 리눅스의 정시 버전은 1996년 1.1 버전(코드명 Buzz)으로 출시되었다.
    - 데비안의 코드명은 토이스토리에 나오는 캐릭터들의 이름으로 붙여졌다.
    - 데비안의 가장 큰 특징 중 하나는 패키지 설치 및 업그레이드가 상당히 단순하며 apt 프로그램을 통해 소프트웨어 설치나 업데이트 등이 자동으로 이루어진다는 것이다.

  - 우분투 리눅스

    - 데비안 리눅스를 기초로 그놈(GNOME) 데스크톱 환경을 사용하는 리눅스 배포판이다.
    - 캐노니컬사에서 개발하기 시작했으며 현재는 캐노니컬사의 지원을 받으며 우분투 재단에서 개발을 진행하고 있다.
    - 2004년 10월 4.10버전을 처음으로 출시했으며, 현재 가장 인기 있는 리눅스 배포판 중 하나가 되었다.
    - 우분투는 남아프리카 어느 부족의 언어로 '네가 있으니 나도 있다'라는 뜻으로, 로고 역시 이를 반영하여 여러 사람이 손을 마주잡고 빙 둘러 서 있는 모양이다.
    - 우분투의 버전은 팔표한 연도와 월로 짓는다. 예를 들어 20.04는 20년 4월에 발표한 버전이다.
    - 지원 기간이 9개월 정도로 짧은 일반 버전과 5년 정도로 긴 LTS(Long Term Support) 버전으로 나눠서 발표하는데 업무용으로는 LTS 버전이 바람직하다.

    



# 가상머신 준비하기

- 가상 머신 사양

  |               | Server_A                             | Server_B               | Client          | WinClient                |
  | ------------- | ------------------------------------ | ---------------------- | --------------- | ------------------------ |
  | 주 용도       | 서버 전용                            | 서버 전용(텍스트 모드) | 클라이언트 전용 | Windows 클라이언트 전용  |
  | OS            | Ubuntu 64-bit                        | 동일                   | 동일            | Windows 10               |
  | 설치할 ISO    | Ubuntu Desktop 20.04                 | Ubuntu Server 20.04    | Kubuntu 20.04   | Windows 10 평가판(32bit) |
  | 하드 용량     | 20GB                                 | 동일                   | 동일            | 60GB                     |
  | 하드 타입     | SCSI                                 | 동일                   | SCSI 또는 SATA  | 동일                     |
  | 메모리 할당   | 2GB(2048MB)                          | 동일                   | 동일            | 1GB                      |
  | 네트워크 타입 | Use network address translation(NAT) | 동일                   | 동일            | 동일                     |
  | CD/DVD        | O                                    | O                      | O               | O                        |
  | Floppy 장치   | X                                    | X                      | O               | X                        |
  | Audio 장치    | X                                    | X                      | O               | X                        |
  | USB 장치      | X                                    | X                      | O               | X                        |
  | Printer       | X                                    | X                      | O               | X                        |




- 가상 머신 생성

  > https://github.com/hedge0207/TIL/blob/master/etc/virtual_machine.md 

  - 위 markdown을 참고하여 가상 머신 및 필요한 운영체제를 설치한다.



# 리눅스 기본 개념

- 리눅스의 특징
  - 대소문자를 구분한다.
  - 일반 사용자는 프롬프트에 `#`으로 표시가 되며, root 사용자는 `$`으로 표시가 된다.



- 디스크 파티션과 크기

  - 리눅스 파티션은 루트 파티션이라 부르는 `/` 파티션과 swap 파티션 2개만 있어도 운영이 가능하다.
  - 일반적인 용도로는 다음과 같이 나눌 수 있다.
    - `/` 파티션과 swap 파티션 2개만 있어도 운영이 가능하다고 한 이유는 바로 아래에서 확인 가능하듯 나머지 파티션(/bin, /sbin, /home)이 루트 파티션(/)에 종속되기 때문이다.

  | 마운트 포인트 | 비고                                                         |
  | ------------- | ------------------------------------------------------------ |
  | /             | 루트 파티션                                                  |
  | /bin          | 기본 명령어가 저장된 곳                                      |
  | /sbin         | 시스템 관리용 명령어가 저장 된 곳                            |
  | /etc          | 시스템 환경 설정과 관련되 파일이 저장 된 곳                  |
  | /boot         | 부팅 커널이 저장 된 곳                                       |
  | /media        | 외부 장치를 마운트하기 위한 곳                               |
  | /usr          | 응용 프로그램이 주로 저장 됨                                 |
  | /lib          | 프로그램의 라이브러리가 저장됨                               |
  | /dev          | 장치 파일들이 저장됨                                         |
  | /proc         | 시스템의 프로세서 정보, 프로그램 정보, 하드웨어 정보 등이 저장 됨 |
  | /tmp          | 임시 파일들이 저장됨                                         |
  | /var          | 로그, 캐시 파일 등이 저장됨                                  |
  | /root         | 시스템 관리자인 root의 홈 디렉토리                           |
  | /home         | 사용자별 공간                                                |
  | /lost+found   | 파일 시스템 복구를 위한 디렉토리                             |
  | swap 파티션   | RAM 부족시 사용되는 공간                                     |




- X 윈도(X Window)
  - MS의 Windows와 같은 GUI를 리눅스에 제공한다.
  - Windows의 경우 그래픽 모드가 없으면 운영이 거의 불가능하지만 리눅스의 X 윈도는 하나의 편리한 유틸리티일 뿐이지 반드시 필요한 것은 아니다.



- 종료와 로그아웃

  - 아래 명령어들로 종료가 가능하다.
    - `-P` 또는 `-p` 옵션은 시스템 종료를 의미한다.

  ```bash
  $ poweroff
  $ shutdown -P now
  $ halt -p
  $ init 0
  ```

  - shutdown 상세
    - `shutdown`의 `now` 부분에 시간을 지정하면 지정한 시간에 시스템을 종료한다.

  ```bash
  $ shutdown -P +10	# 10분 후 종료
  $ shutdown -r 22:00 # 22시에 재부팅
  $ shutdown -c 		# 예약된 shutdown 취소
  $ shutdown -k +15	# 현재 접속한 사용자에게 15분 후 종료된다는 메시지를 보내지만 실제로 종료되지는 않음
  ```

  - 로그아웃
    - 로그아웃은 시스템 종료와 의미가 다른데, 리눅스는 여러 사용자가 동시에 접속해서 사용하는 다중 사용자(Multi-User) 시스템이므로 자신만의 접속을 끝내는 로그아웃이 필요하다.

  ```bash
  # 아래 명령어로 로그아웃이 가능하다.
  $ logout
  $ exit
  ```



- 리부팅

  - 아래 명령어를 통해 리부팅이 가능하다.
  - init은 종료에도 쓰이고 리부팅에도 쓰이는데 init 뒤에 붙는 숫자는 아래의 런레벨에 관한 설명을 참고하면 된다.

  ```bash
  $ reboot
  $ init 6
  ```



- 가상 콘솔
  - 가상 콘솔이란 가상의 모니터라고 생각하면 이해하기 쉽다.
    - 우분투는 총 6개(2~7번)의 가상 콘솔을 제공한다.
    - 각각의 가상 콘솔로 이동하는 단축키는 `ctrl+alt+F2~F7`이다.
    - 위 단축키를 통해 이동하면 화면 최상단에 `tty<숫자>`와 같은 메시지가 출력되는데 숫자에 해당하는 콘솔이라는 가상 콘솔이라는 뜻이다.
  - 가상 콘솔을 활용하여 `shutdown` 명령어를 입력했을 때 다른 사용자에게 무슨일이 발생하는지 확인해본다.
    - `ctrl+alt+F3`을 입력하여 3번 콘솔로 이동 후 root 사용자로 로그인한다.
    - `ctrl+alt+F4`를 입력하여 4번 콘솔로 이동 후 일반 사용자로 로그인한다.
    - 다시 3번 콘솔로 이동 후 `shutdown -h +5`를 입력하여 5분 후에 종료하겠다는 명령을 날린다.
    - 4번 콘솔로 이동하면 `The system is going to down for poweroff at <날짜 및 시간>`이라는 메시지가 출력된 것을 확인 가능한데, 이 상태에서 `enter`를 누르면 다시 사용이 가능하지만 위 메시지는 매 분 뜨게 된다.
    - 다시 3번 콘솔로 이동하여 `shutdown -c`를 입력해 예약한 종료를 취소한다.
    - 다시 4번 콘솔로 이동하여 확인해보면 `The system shutdown has been cancelled`라는 메시지가 뜬 것을 확인 가능하다.
    - 3번, 4번 콘솔에서 모두 logout 한 뒤 2번 콘솔로 돌아간다.



- 런 레벨

  - 리눅스 시스템이 가동되는 방법을 7가지 런레벨로 나눌 수 있다.
  - init 명령어 뒤에 붙는 숫자가 바로 런레벨로, init은 런 레벨을 변경하는 명령어이다.
  - 일반적으로 런 레벨 3번을 Multi-User 모드로 사용한다.
    - 2번과 4번은 우분투에서 사용하지 않지만 다른 리눅스 기반 OS와의 호환성을 위해 런 레벨 3번과 동일한 것으로 취급한다.

  | 런레벨 | 영문 모드  | 설명                      | 비고                  |
  | ------ | ---------- | ------------------------- | --------------------- |
  | 0      | Power Off  | 종료 모드                 |                       |
  | 1      | Rescue     | 시스템 복구 모드          | 단일 사용 모드        |
  | 2      | Multi-User |                           | 사용하지 않음         |
  | 3      | Multi-User | 텍스트 모드의 다중 사용자 |                       |
  | 4      | Multi-User |                           | 사용하지 않음         |
  | 5      | Graphical  | 그래픽 모드의 다중 사용자 | X 윈도 사용시 지정 됨 |
  | 6      | Reboot     |                           |                       |

  - 런 레벨 모드 확인
    - `/lib/systemd/system` 디렉터리의 `runlevel?.target` 파일을 확인한다.
    - 7개의 `runlevel?.target` 파일을 확인 가능한데 `runlevel?.target` 파일은 모두 링크 파일이다.
    - 각각의 링크 파일은 실제 파일과 연결되어 있다.

  ```bash
  $ cd /lib/systemd/system
  $ ls -l runlevle?.target
  ```

  



